<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./src/assets/codeIcon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Porfolio de Ronald Gallardo - Desarrollador web</title>
  <script>
    (function() {
      function getZustandTheme() {
        try {
          const stored = localStorage.getItem("theme");
          if (!stored) return null;
          
          // Zustand con persist guarda en formato JSON
          const parsed = JSON.parse(stored);
          
          // Diferentes formatos posibles de Zustand
          return parsed?.state?.theme || parsed?.theme || null;
        } catch (e) {
          return null;
        }
      }
      
      function applyTheme() {
        const storedTheme = getZustandTheme();
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        
        let shouldBeDark = false;
        
        if (storedTheme === "dark") {
          shouldBeDark = true;
        } else if (storedTheme === "system" || !storedTheme) {
          shouldBeDark = systemDark;
        }
        
        // Aplicar clase y color-scheme inmediatamente
        const root = document.documentElement;
        if (shouldBeDark) {
          root.classList.add("dark");
          root.style.colorScheme = "dark";
        } else {
          root.classList.remove("dark");
          root.style.colorScheme = "light";
        }
      }
      
      // Aplicar tema inmediatamente
      applyTheme();
      
      // Escuchar cambios del sistema para tema 'system'
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", function() {
        const storedTheme = getZustandTheme();
        if (!storedTheme || storedTheme === "system") {
          applyTheme();
        }
      });
    })();
  </script>
</head>

<body class="relative text-gray-600 dark:text-gray-200 text-sm  sm:text-base">
  <!-- <div class="absolute top-0 z-[-2] h-screen w-screen bg-white dark:bg-neutral-950 
    bg-[radial-gradient(100%_50%_at_50%_0%,rgba(0,163,255,0.13)_0,rgba(0,163,255,0)_50%,rgba(0,163,255,0)_100%)]
    dark:bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(120,119,198,0.3),rgba(255,255,255,0))]">
  </div> -->
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>